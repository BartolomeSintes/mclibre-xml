<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>XSLT: Transformaciones XSL. XML. Bartolomé Sintes Marco</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="../varios/xml.css" title="mclibre" />
  <link rel="icon" href="../varios/favicon.ico" />
  <link rel="stylesheet" type="text/css" href="../varios/prism-xml.css" />
  <script src="../varios/prism.js" async="async"></script>
</head>

<body>
  <h1>XSLT: Transformaciones XSL</h1>

  <nav>
    <p>
      <a href="../index.html"><img src="../varios/iconos/icono-xml.svg" alt="Índice de XML" title="Índice de XML" width="48" height="48" /></a>
      <a href="#"><img src="../varios/iconos/icono-arrow-circle-up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36" /></a>
    </p>

    <div class="toc">
      <h2>XSLT</h2>

      <ul>
        <li><a href="#xslt-que-es">El lenguaje XSLT</a></li>
        <li><a href="#xslt-hojas-estilo">Hojas de estilo XSLT</a></li>
        <li><a href="#xslt-enlazar">Enlazar hojas de estilo XSLT</a></li>
        <li><a href="#xslt-navegador">Abrir en navegador</a></li>
        <li><a href="#xslt-plantillas">Ejemplos plantillas XSLT</a>
          <ul>
            <li><a href="#xslt-plantilla-vacia">Plantillas vacías</a></li>
            <li><a href="#xslt-value-of"><span class="xsl-i">&lt;xsl:value-of&gt;</span></a></li>
            <li><a href="#xslt-generar-texto">Generar texto adicional</a></li>
            <li><a href="#xslt-apply-templates"><span class="xsl-i">&lt;xsl:apply-templates&gt;</span></a></li>
            <li><a href="#xslt-text-strip-space"><span class="xsl-i">&lt;xsl:text&gt;</span> <span class="xsl-i">&lt;xsl:strip-space&gt;</span></a></li>
            <li><a href="#xslt-attribute">atributos <span class="xsl-i">&lt;xsl:attribute&gt;</span></a></li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>

  <section id="xslt-que-es">
    <h2>El lenguaje de programación XSLT</h2>

    <p>XSLT (Transformaciones XSL) es un lenguaje de programación declarativo que permite generar documentos a partir de documentos XML, como ilustra la imagen siguiente:</p>

    <p class="mcl-centrado">
      <img src="../img/xslt-resumen.png" alt="XSLT Transformaciones XSL" width="731" height="150" />
    </p>

    <p></p>
    <ul>
      <li>El documento XML es el documento inicial a partir del cual se va a generar el resultado.</li>
      <li>La hoja de estilo XSLT es el documento que contiene el código fuente del programa, es decir, las reglas de transformación que se van a aplicar al documento inicial.</li>
      <li>El procesador XSLT es el programa de ordenador que aplica al documento inicial las reglas de transformación incluidas en la hoja de estilo XSLT y genera el documento final.</li>
      <li>El resultado de la ejecución del programa es un nuevo documento (que puede ser un documento XML o no).</li>
    </ul>

    <p>XSLT se utiliza para obtener a partir de un documento XML otros documentos (XML o no). A un documento XML se le pueden aplicar distintas hojas de estilo XSLT para obtener distintos resultados y una misma hoja de estilo XSLT se puede aplicar a distintos documentos XML.</p>

    <p>El lenguaje XSLT está normalizado por el W3C, que ha publicado tres versiones de este lenguaje:</p>
    <ul>
      <li>noviembre de 1999: <a href="http://www.w3.org/TR/1999/REC-xslt-19991116">XSLT 1.0</a> </li>
      <li>enero de 2007: <a href="http://www.w3.org/TR/2007/REC-xslt20-20070123/">XSLT 2.0</a> </li>
      <li>junio de 2017: <a href="https://www.w3.org/TR/2017/REC-xslt-30-20170608/">XSLT 3.0</a></li>
    </ul>

    <p class="mcl-centrado">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="850" viewBox="-50 -60 850 120">
        <line x1="-50" y1="0" x2="950" y2="0" stroke-width="3" stroke="red" />
        <line x1="0" y1="-30" x2="0" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="0" y="-40" text-anchor="middle" style="font-size: 100%">1995</text>
        <line x1="150" y1="-30" x2="150" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="150" y="-40" text-anchor="middle" style="font-size: 100%">2000</text>
        <line x1="300" y1="-30" x2="300" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="300" y="-40" text-anchor="middle" style="font-size: 100%">2005</text>
        <line x1="450" y1="-30" x2="450" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="450" y="-40" text-anchor="middle" style="font-size: 100%">2010</text>
        <line x1="600" y1="-30" x2="600" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="600" y="-40" text-anchor="middle" style="font-size: 100%">2015</text>
        <line x1="750" y1="-30" x2="750" y2="30" stroke-width="2" stroke-dasharray="5,5" stroke="black" />
        <text x="750" y="-40" text-anchor="middle" style="font-size: 100%">2020</text>
        <circle cx="146" cy="0" r="7" fill="red" />
        <text x="146" y="-15" text-anchor="middle" fill="red" style="font-size: 100%; font-weight: bold">XSLT 1.0</text>
        <circle cx="362" cy="0" r="7" fill="red" />
        <text x="362" y="-15" text-anchor="middle" fill="red" style="font-size: 100%; font-weight: bold">XSLT 2.0</text>
        <circle cx="673" cy="0" r="7" fill="red" />
        <text x="673" y="-15" text-anchor="middle" fill="red" style="font-size: 100%; font-weight: bold">XSLT 3.0</text>
      </svg>
    </p>

    <p>Aunque hay incompatibilidades entre estas versiones, lo que se cuenta en esta lección es válido para todas ellas.</p>
  </section>

  <section id="xslt-hojas-estilo">
    <h2>Hojas de estilo XSLT</h2>

    <p>XSLT es un lenguaje declarativo. Por ello, las hojas de estilo XSLT no se escriben como una secuencia de instrucciones, sino como una colección de plantillas (template rules). Cada plantilla establece cómo se transforma un determinado elemento (definido mediante expresiones XPath). La transformación del documento se realiza de la siguiente manera:</p>
    <ul>
      <li>El procesador analiza el documento y construye el árbol del documento.</li>
      <li>El procesador recorre el árbol del documento desde el nodo raíz.</li>
      <li>En cada nodo recorrido, el procesador aplica o no alguna plantilla:
        <ul>
          <li>Si a un nodo no se le puede aplicar ninguna plantilla, su contenido se incluye en el documento final (el texto del nodo, no el de los nodos descendientes). A continuación, el procesador recorre sus nodos hijos.</li>
          <li>Si a un nodo se le puede aplicar una plantilla, se aplica la plantilla. La plantilla puede generar texto que se incluye en el documento final. En principio, el procesador no recorre sus nodos hijos, salvo que la plantilla indique al procesador que sí que deben recorrerse los nodos hijos.</li>
        </ul>
      </li>
      <li>Cuando el procesador ha recorrido el árbol, se ha terminado la transformación.</li>
    </ul>

    <hr class="corta" />

    <p>Una hoja de estilo XSLT es un documento XML que contiene al menos las etiquetas siguientes:</p>

    <div class="codigo">
      <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;
&lt;/xsl:stylesheet&gt;</code>
</pre>
    </div>

    <p>Estas etiquetas son:</p>

    <ul>
      <li>la declaración xml <span class="xml-pi">&lt;?xml&gt;</span>, propia de cualquier documento XML.</li>
      <li>la instrucción <span class="xsl-i">&lt;xsl:stylesheet&gt;</span> es la etiqueta raíz de la hoja de estilo, sus atributos indican la versión y el espacio de nombres correspondiente.</li>
    </ul>

    <hr class="corta" />

    <p>Dentro de la instrucción <span class="xsl-i">&lt;xsl:stylesheet&gt;</span> se pueden encontrar los llamados elementos de alto nivel y las plantillas, como en el ejemplo siguiente:</p>

    <div class="codigo">
      <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:output method="xml" indent="yes"/&gt;

  &lt;xsl:template match="/"&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
    </div>

    <p>Estas etiquetas son</p>
    <ul>
      <li>el elemento de alto nivel <span class="xsl-i">&lt;xsl:output&gt;</span> indica el tipo de salida producida.</li>
      <li>la instrucción <span class="xsl-i">&lt;xsl:template&gt;</span> es una plantilla.
        <ul>
          <li>El atributo <span class="xsl-atri">match</span> indica los elementos afectados por la plantilla y contiene una expresión XPath.</li>
          <li>El contenido de la instrucción define la transformación a aplicar (si la instrucción no contiene nada, como en el ejemplo anterior, sustituirá el nodo por nada, es decir, eliminará el nodo, aunque conservará el texto contenido en el elemento).</li>
        </ul>
      </li>
    </ul>

    <hr class="corta" />

    <p>Cuando se aplica una plantilla a un nodo, en principio no se recorren los nodos descendientes. Para indicar que sí queremos recorrer los nodos descendientes y aplicarles las plantillas que les correspondan, hay que utilizar la instrucción <span class="xsl-i">&lt;xsl:apply-templates /&gt;</span>, como en el ejemplo siguiente:</p>

    <div class="codigo">
      <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="/"&gt;
    &lt;xsl:apply-templates /&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="elemento"&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
    </div>
  </section>

  <section id="xslt-enlazar">
    <h2>Enlazar documentos XML con hojas de estilo XSLT</h2>

    <p>Se puede asociar de forma permanente una hoja de estilo XSLT a un documento XML mediante la instrucción de procesamiento <span class="xml-pi">&lt;?xml-stylesheet ?&gt;</span>, la misma que permite <a href="xml-css.html#xml-css">asociar hojas de estilo CSS</a>. La instrucción de procesamiento <span class="xml-pi">&lt;?xml-stylesheet ... ?&gt;</span> va al principio del documento, después de la declaración XML.</p>

    <div class="codigo">
      <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
<span class="codigo-resaltado">&lt;?xml-stylesheet <span class="attr-name">type</span>=<span class="attr-value">"text/xsl"</span> <span class="attr-name">href</span>=<span class="attr-value">"ejemplo.xsl"</span>?&gt;</span></code>
</pre>
    </div>

    <p>Cuando se visualiza en un navegador web un documento XML enlazado con una hoja de estilo XSLT, los navegadores muestran el resultado de la transformación, aunque si se muestra el código fuente de la página, los navegadores muestran el documento XML original.</p>

    <p><strong>Nota</strong>: Google Chrome no muestra los documentos XML que enlazan a hojas de estilo XSLT abiertos como archivos locales (file://...), como se comenta en la <a href="../otros/diferencias-navegadores.html#enlazar-xslt">lección de diferencias entre navegadores</a>. Firefox y Microsoft Edge sí lo hacen.</p>
  </section>

  <section id="xslt-navegador">
    <h2>Abrir documentos XML con hojas de estilo XSLT en el navegador</h2>

    <p>Al abrir en un navegador una página XML enlazada con una hoja de estilo XSLT, el navegador muestra el resultado de la transformación. Pero no muestra el código fuente obtenido como resultado, sino interpretando ese código fuente, como cuando se enlaza una hoja de estilo CSS vacía.</p>

    <p>En los ejemplos de esta página se ha incluido a la derecha un enlace para abrir el ejemplo en el navegador. En los primeros ejemplos, el resultado es texto que se muestra todo seguido. Más adelante, en esta misma lección, en los ejemplo se generan resultados que el navegador puede mostrar en forma de párrafos. En los ejercicios se proponen transformaciones que el navegador puede mostrar en forma de listas o tablas.</p>

    <p>Realmente, tanto en los ejemplos como en los ejercicios no es necesario abrir los archivos en el navegador. Basta con comprobar que se obtiene el resultado deseado en XML Copy Editor (u otro editor que estemos utilizando).</p>
  </section>

  <section id="xslt-plantillas">
    <h2>Ejemplos de plantillas XSLT</h2>

    <p>Vamos a ver ejemplos de plantillas trabajando sobre el documento siguiente:</p>

    <div class="codigo">
      <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;biblioteca&gt;
  &lt;libro&gt;
    &lt;titulo&gt;La vida está en otra parte&lt;/titulo&gt;
    &lt;autor&gt;Milan Kundera&lt;/autor&gt;
    &lt;fechaPublicacion año="1973"/&gt;
  &lt;/libro&gt;
  &lt;libro&gt;
    &lt;titulo&gt;Pantaleón y las visitadoras&lt;/titulo&gt;
    &lt;autor fechaNacimiento="28/03/1936"&gt;Mario Vargas Llosa&lt;/autor&gt;
    &lt;fechaPublicacion año="1973"/&gt;
  &lt;/libro&gt;
  &lt;libro&gt;
    &lt;titulo&gt;Conversación en la catedral&lt;/titulo&gt;
    &lt;autor fechaNacimiento="28/03/1936"&gt;Mario Vargas Llosa&lt;/autor&gt;
    &lt;fechaPublicacion año="1969"/&gt;
  &lt;/libro&gt;
&lt;/biblioteca&gt;</code>
</pre>
    </div>

    <p>Si los ejemplos de esta página se abren en el navegador, el resultado no coincide en casi todos los casos con el que se muestra en esta página ya que los navegadores no respetan los saltos de línea ni los espacios en blanco, ni muestran las etiquetas. Los resultados que se muestran en esta página son los que se obtienen con XML Copy Editor.</p>

    <section id="xslt-plantilla-vacia">
      <h3>Plantillas vacías o no existentes</h3>
      <ul>
        <li>Si no hay plantillas, el procesador simplemente recorre todos los nodos y extrae el texto contenido por cada nodo.<br />

          <p>En el ejemplo siguiente, el resultado incluye el contenido de los nodos <span class="xml-tag">&lt;título&gt;</span> y <span class="xml-tag">&lt;autor&gt;</span> puesto que no hay ninguna plantilla.</p>

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

    La vida está en otra parte
    Milan Kundera

    Pantaleón y las visitadoras
    Mario Vargas Llosa

    Conversación en la catedral
    Mario Vargas Llosa</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-01-1.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
        <li>Si hay una plantilla vacía, el procesador no genera ningún resultado en el documento final ni recorre los nodos hijos.<br />

          <p>En el ejemplo siguiente, el resultado incluye el contenido de los nodos <span class="xml-tag">&lt;titulo&gt;</span>, ya que no hay regla para ellos, pero los de <span class="xml-tag">&lt;autor&gt;</span> se pierden porque la plantilla es vacía.</p>

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="autor"&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code></pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

    La vida está en otra parte

    Pantaleón y las visitadoras

    Conversación en la catedral</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-01-2.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
        <li>En el caso más extremo, si la plantilla vacía se aplica al nodo raíz, el procesador no genera ningún resultado en el documento final ni recorre ningún nodo hijo.<br />

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="/"&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre><code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;</code></pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-01-3.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
      </ul>
    </section>

    <section id="xslt-value-of">
      <h3>La instrucción <span class="xsl-i">&lt;xsl:value-of&gt;</span></h3>

      <p>La instrucción <span class="xsl-i">&lt;xsl:value-of&gt;</span> extrae el contenido del nodo seleccionado.</p>
      <ul>
        <li>En el ejemplo siguiente, el documento final contiene los autores de los libros porque la plantilla los genera con la instrucción <span class="xsl-i">&lt;xsl:value-of&gt;</span>. Como se ha aplicado una plantilla al nodo <span class="xml-tag">&lt;libro&gt;</span>, sus hijos (<span class="xml-tag">&lt;titulo&gt;</span>, <span class="xml-tag">&lt;autor&gt;</span> y <span class="xml-tag">&lt;fechaPublicacion&gt;</span>) no se recorren. Por eso, los títulos de los libros no aparecen en el documento final.

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;xsl:value-of select="autor"/&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

  Milan Kundera
  Mario Vargas Llosa
  Mario Vargas Llosa</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-02-1.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
        <li>En el ejemplo siguiente, se obtienen el titulo y el autor de los libros, pero uno a continuación de otro. Los saltos de línea se crean tras cada aplicación de la regla (es decir, a cada libro), pero no en el interior de la regla.

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;xsl:value-of select="titulo"/&gt;
     &lt;xsl:value-of select="autor"/&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code></pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

  La vida está en otra parteMilan Kundera
  Pantaleón y las visitadorasMario Vargas Llosa
  Conversación en la catedralMario Vargas Llosa</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-02-2.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
        <li>En el ejemplo siguiente, los autores se obtienen gracias a la regla que extrae el contenido del nodo (el carácter punto "." hace referencia al propio elemento) y los títulos se obtienen porque al no haber reglas para ese nodo se extrae el contenido. El resultado es el mismo que el del ejemplo 1-1, pero por motivos distintos.

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="autor"&gt;
     &lt;xsl:value-of select="."/&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code></pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

    La vida está en otra parte
    Milan Kundera

    Pantaleón y las visitadoras
    Mario Vargas Llosa

    Conversación en la catedral
    Mario Vargas Llosa</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-02-3.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
      </ul>

      <p>También se pueden extraer los valores de los atributos, utilizando @.</p>

      <ul>
        <li>En el ejemplo siguiente, las fechas de publicación se obtienen gracias a la regla que extraen el valor del atributo y los títulos y autores se obtienen porque al no haber reglas para ese nodo se extrae el contenido.

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="fechaPublicacion"&gt;
     &lt;xsl:value-of select="@año"/&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

    La vida está en otra parte
    Milan Kundera
    1973

    Pantaleón y las visitadoras
    Mario Vargas Llosa
    1973

    Conversación en la catedral
    Mario Vargas Llosa
    1969</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-02-4.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
      </ul>
    </section>

    <section id="xslt-generar-texto">
      <h3>Generar texto adicional</h3>

      <p>Se puede generar texto escribiendolo en la regla, por ejemplo, código html.</p>

      <ul>
        <li>En el ejemplo siguiente se obtienen los nombres de los autores porque la regla selecciona el nodo <span class="xml-tag">&lt;libro&gt;</span> como en el ejemplo, 2-1, pero además generamos las etiquetas <span class="html-eti">&lt;p&gt;</span>. El resultado sigue sin verse bien en el navegador, porque aunque hay etiquetas <span class="html-eti">&lt;p&gt;</span>, falta la etiqueta global <span class="html-eti">&lt;html&gt;</span>.

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;p&gt;&lt;xsl:value-of select="autor"/&gt;&lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

&lt;p&gt;Milan Kundera&lt;/p&gt;
&lt;p&gt;Mario Vargas Llosa&lt;/p&gt;
&lt;p&gt;Mario Vargas Llosa&lt;/p&gt;</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-03-1.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
      </ul>

      <p>Dentro de la regla podemos hacer referencia a varios subnodos.</p>
      <ul>
        <li>En el ejemplo siguiente se obtienen los nombres de los autores y los títulos de los libros porque la regla selecciona el nodo <span class="xml-tag">&lt;libro&gt;</span> como en el ejemplo, 2-1, pero además generamos las etiquetas <span class="html-eti">&lt;p&gt;</span>. El resultado sigue sin verse bien en el navegador, porque aunque hay etiquetas <span class="html-eti">&lt;p&gt;</span>, falta la etiqueta global <span class="html-eti">&lt;html&gt;</span>.

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;p&gt;&lt;xsl:value-of select="autor"/&gt;&lt;/p&gt;
     &lt;p&gt;&lt;xsl:value-of select="titulo"/&gt;&lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

&lt;p&gt;Milan Kundera&lt;/p&gt;
&lt;p&gt;La vida está en otra parte&lt;/p&gt;

&lt;p&gt;Mario Vargas Llosa&lt;/p&gt;
&lt;p&gt;Pantaleón y las visitadoras&lt;/p&gt;

&lt;p&gt;Mario Vargas Llosa&lt;/p&gt;
&lt;p&gt;Conversación en la catedral&lt;/p&gt;</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-03-2.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
        <li>
          <p>Los siguientes ejemplos intentan conseguir el mismo resultado que el ejemplo anterior (ejemplo 3-2), pero utilizando dos reglas, y no lo consiguen:</p>

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;p&gt;&lt;xsl:value-of select="autor"/&gt;&lt;/p&gt;
 &lt;/xsl:template&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;p&gt;&lt;xsl:value-of select="titulo"/&gt;&lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

&lt;p&gt;La vida está en otra parte&lt;/p&gt;

&lt;p&gt;Pantaleón y las visitadoras&lt;/p&gt;

&lt;p&gt;Conversación en la catedral&lt;/p&gt;</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-03-3.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;p&gt;&lt;xsl:value-of select="titulo"/&gt;&lt;/p&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;p&gt;&lt;xsl:value-of select="autor"/&gt;&lt;/p&gt;
 &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

&lt;p&gt;Milan Kundera&lt;/p&gt;

&lt;p&gt;Mario Vargas Llosa&lt;/p&gt;

&lt;p&gt;Mario Vargas Llosa&lt;/p&gt;</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-03-4.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>

          <p>¿Por qué en un caso se obtienen sólo los títulos y en el otro sólo los autores? Porque el procesador XSLT sólo aplica una regla a cada nodo. Si tenemos dos reglas para el mismo nodo, el procesador sólo aplica una de ellas (la última, en este caso).</p>
        </li>
      </ul>

      <p>Además de generar etiquetas, se puede generar texto.</p>
      <ul>
        <li>En el ejemplo siguiente se generan frases a partir del contenido de los nodos.

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="libro"&gt;
    &lt;p&gt;&lt;xsl:value-of select="autor"/&gt; escribió "&lt;xsl:value-of select="titulo"/&gt;"&lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;

&lt;p&gt;Milan Kundera escribió "La vida está en otra parte"&lt;/p&gt;

&lt;p&gt;Mario Vargas Llosa escribió "Pantaleón y las visitadoras"&lt;/p&gt;

&lt;p&gt;Mario Vargas Llosa escribió "Conversación en la catedral"&lt;/p&gt;</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-03-5.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
      </ul>
    </section>

    <section id="xslt-apply-templates">
      <h3>Aplicar reglas a subnodos: la instrucción <span class="xsl-i">&lt;xsl:apply-templates&gt;</span></h3>

      <p>La instrucción <span class="xsl-i">&lt;xsl:apply-templates&gt;</span> hace que se apliquen a los subelementos las reglas que les sean aplicables.</p>

      <ul>
        <li>En el ejemplo siguiente, se genera la etiqueta <span class="html-eti">&lt;html&gt;</span> además de unos párrafos con los nombres de los autores. Este ejemplo sí que se puede ver en el navegador ya que se interpreta como html.

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="/"&gt;
    &lt;html&gt;
      &lt;h1&gt;Autores&lt;/h1&gt;
      &lt;xsl:apply-templates /&gt;
    &lt;/html&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;p&gt;&lt;xsl:value-of select="autor"/&gt;&lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;html&gt;&lt;h1&gt;Autores&lt;/h1&gt;
  &lt;p&gt;Milan Kundera&lt;/p&gt;
  &lt;p&gt;Mario Vargas Llosa&lt;/p&gt;
  &lt;p&gt;Mario Vargas Llosa&lt;/p&gt;
&lt;/html&gt;</code>
        </pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-04-1.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>

          <p>La primera regla sustituye el elemento raíz (y todos sus subelementos) por las etiquetas <span class="html-eti">&lt;html&gt;</span> y <span class="html-eti">&lt;h1&gt;</span>, pero además aplica a los subelementos las reglas que les son aplicables. En este caso, sólo hay una regla para los elementos <span class="xml-tag">&lt;libro&gt;</span> que generan los párrafos.</p>
        </li>
      </ul>
    </section>

    <section id="xslt-text-strip-space">
      <h3>Saltos de línea y espacios en blanco: las instrucciones <span class="xsl-i">&lt;xsl:text&gt;</span> y <span class="xsl-i">&lt;xsl:strip-space&gt;</span></h3>

      <p>Al transformar un documento, los procesadores XSLT incorporan saltos de línea y espacios en blanco en el resultado, pero no lo hacen de forma uniforme. Por ejemplo, XML Copy Editor y Notepad++ (con el plug-in XML Tols) producen diferentes resultados.</p>

      <p>No parece haber una solución sencilla que funcione en todos los procesadores, pero sí soluciones que funcionen en cada uno de ellos.</p>

      <h4>La instrucción <span class="xsl-i">&lt;xsl:strip-space&gt;</span></h4>

      <p><strong>En el caso de XML Copy Editor</strong>, la forma más sencilla de mejorar el formato de presentación de los resultados, eliminando líneas en blanco innecesarias y sangrando los elementos anidados, es utilizar la instrucción <span class="xsl-i">&lt;xsl:strip-space&gt;</span>. Pero debe tenerse en cuenta que esta instrucción no produce el mismo resultado en otros procesadores XSLT (como en Notepad++ con XML Tools).</p>

      <p>La instrucción <span class="xsl-i">&lt;xsl:strip-space&gt;</span> permite indicar si los elementos que contienen únicamente espacios en blanco se incluyen en la transformación o no.</p>

      <ul>
        <li>En el ejemplo anterior (del <a href="#xslt-apply-templates">apartado sobre la instrucción <span class="xsl-i">&lt;xsl:apply-templates&gt;</span></a>) la etiqueta <span class="html-eti">&lt;h1&gt;</span> se generaba en la misma línea que la etiqueta <span class="html-eti">&lt;html&gt;</span>, pero en el ejemplo siguiente se generan en líneas distintas (y las etiquetas se muestran sangradas) al utilizar la instrucción <span class="xsl-i">&lt;xsl:strip-space&gt;</span>:

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;
  <span class="codigo-resaltado">&lt;xsl:strip-space elements="*" /&gt;</span>

  &lt;xsl:template match="/"&gt;
    &lt;html&gt;
      &lt;h1&gt;Autores&lt;/h1&gt;
      &lt;xsl:apply-templates /&gt;
    &lt;/html&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;p&gt;&lt;xsl:value-of select="autor"/&gt;&lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;html&gt;
  &lt;h1&gt;Autores&lt;/h1&gt;
  &lt;p&gt;Milan Kundera&lt;/p&gt;
  &lt;p&gt;Mario Vargas Llosa&lt;/p&gt;
  &lt;p&gt;Mario Vargas Llosa&lt;/p&gt;
&lt;/html&gt;</code>
        </pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-05-1.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
      </ul>

      <h4>La instrucción <span class="xsl-i">&lt;xsl:text&gt;</span></h4>

      <p><strong>En el caso de Notepad++ con XML Tools</strong>, se puede mejorar el formato de presentación de los resultados, insertando líneas en blanco innecesarias y sangrando los elementos anidados, utilizando la instrucción <span class="xsl-i">&lt;xsl:text&gt;</span>. Pero debe tenerse en cuenta que esta instrucción no permite eliminar líneas en blanco que se producen en otros procesadores (como en XML Copy Editor).</p>

      <p>La instrucción <span class="xsl-i">&lt;xsl:text&gt;</span> permite generar texto que no se puede generar simplemente añadiéndolo (saltos de líneas y espacios en blanco, por ejemplo).</p>

      <ul>
        <li>En el ejemplo anterior (del <a href="#xslt-apply-templates">apartado sobre la instrucción <span class="xsl-i">&lt;xsl:apply-templates&gt;</span></a>) la etiqueta <span class="html-eti">&lt;h1&gt;</span> se generaba en la misma línea que la etiqueta <span class="html-eti">&lt;html&gt;</span>, pero en el ejemplo siguiente se generan en líneas distintas al añadir un salto de línea con la entidad de carácter &amp;#10; (y un par de espacios para aliner la etiqueta <span class="html-eti">&lt;h1&gt;</span> con las etiquetas <span class="html-eti">&lt;p&gt;</span>):

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="/"&gt;
    &lt;html&gt;
      <span class="codigo-resaltado">&lt;xsl:text&gt;&amp;#10;  &lt;/xsl:text&gt;</span>
      &lt;h1&gt;Autores&lt;/h1&gt;
      &lt;xsl:apply-templates /&gt;
    &lt;/html&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="libro"&gt;
     &lt;p&gt;&lt;xsl:value-of select="autor"/&gt;&lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;html&gt;
  &lt;h1&gt;Autores&lt;/h1&gt;
  &lt;p&gt;Milan Kundera&lt;/p&gt;
  &lt;p&gt;Mario Vargas Llosa&lt;/p&gt;
  &lt;p&gt;Mario Vargas Llosa&lt;/p&gt;
&lt;/html&gt;</code>
        </pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-05-2.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
      </ul>

    </section>

    <section id="xslt-attribute">
      <h3>La instrucción <span class="xsl-i">&lt;xsl:attribute&gt;</span></h3>

      <p>La instrucción <span class="xsl-i">&lt;xsl:attribute&gt;</span> permite generar un atributo y su valor. Se utiliza cuando el valor del atributo se obtiene a su vez de algún nodo.</p>

      <p>Por ejemplo, a partir del siguiente documento XML, se quiere generar la etiqueta <span class="html-eti">&lt;img&gt;</span>. en la que el valor del atributo <span class="html-atri">src</span> sea el contenido de la etiqueta <span class="xml-tag">&lt;imagen&gt;</span>.</p>

      <div class="codigo">
        <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;licencias&gt;
  &lt;licencia&gt;
    &lt;nombre&gt;Creative Commons By - Share Alike&lt;/nombre&gt;
    &lt;imagen&gt;cc-bysa-88x31.png&lt;/imagen&gt;
  &lt;/licencia&gt;
&lt;/licencias&gt;</code>
</pre>
      </div>
      <ul>
        <li>No se puede utilizar la instrucción <span class="xsl-i">&lt;xsl:value-of&gt;</span> como en el ejemplo incorrecto siguiente:

          <div class="filaflex cabecera">
            <div class="icono-navegadores-vacio"><img src="../varios/iconos/icono-transparente.svg" alt="Hueco" width="40" height="4" /></div>
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="icono-ok"><img src="../varios/iconos/icono-okno.svg" alt="Incorrecto" title="Incorrecto" width="40" height="40" /></div>
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="licencia"&gt;
    &lt;p&gt;&lt;img src="&lt;xsl:value-of select="imagen" /&gt;" /&gt;&lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>Error at line 5, column 19: not well-formed (invalid  token)</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-06-1.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>

          <p>En este caso el problema no es debido a la utilización de comillas dobles (también daría error si se hubieran utilizado comillas simples o entidades), sino que es necesario utilizar la instrucción <span class="xsl-i">&lt;xsl:attribute&gt;</span>.</p>
        </li>
        <li>Para generar un atributo en una etiqueta, es necesario utilizar la instrucción <span class="xsl-i">&lt;xsl:attribute&gt;</span>, como en el ejemplo siguiente:

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="licencia"&gt;
    &lt;p&gt;&lt;img&gt;
    &lt;xsl:attribute name="src"&gt;
      &lt;xsl:value-of select="imagen" /&gt;
    &lt;/xsl:attribute&gt;
    &lt;/img&gt;
    &lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;p&gt;
  &lt;img src="cc-bysa-88x31.png"/&gt;
&lt;/p&gt;</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-06-2.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
          <p>En la hoja de estilo XSLT, la etiqueta <span class="html-eti">&lt;img&gt;</span> se escribe con apertura y cierre, aunque en el resultado aparece como etiqueta monoatómica.</p>

          <p>De todas formas, el navegador no mostraría todavía la imagen, puesto que no interpreta la etiqueta <span class="html-eti">&lt;img&gt;</span> como la etiqueta de imagen del html.</p>
        </li>
        <li>Como en ejemplos anteriores, para que la imagen se muestre en el navegador sería necesario generar también la etiqueta <span class="html-eti">&lt;html&gt;</span>:

          <div class="filaflex cabecera">
            <div>XSLT</div>
            <div>Resultado</div>
            <div class="icono-enlace">Enlace</div>
          </div>

          <div class="filaflex">
            <div class="codigo">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;

  &lt;xsl:template match="/"&gt;
    &lt;html&gt;
     &lt;xsl:apply-templates /&gt;
    &lt;/html&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="licencia"&gt;
    &lt;p&gt;&lt;img&gt;
    &lt;xsl:attribute name="src"&gt;
      &lt;xsl:value-of select="imagen" /&gt;
    &lt;/xsl:attribute&gt;
    &lt;/img&gt;
    &lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;</code>
</pre>
            </div>
            <div class="resultado-xslt">
              <pre>
<code class="language-xml">&lt;?xml <span class="attr-name">version</span>=<span class="attr-value">"1.0"</span> <span class="attr-name">encoding</span>=<span class="attr-value">"UTF-8"</span>?&gt;
&lt;html&gt;
  &lt;p&gt;&lt;img src="cc-bysa-88x31.png"/&gt;&lt;/p&gt;
&lt;/html&gt;</code>
</pre>
            </div>
            <div class="icono-enlace"><a href="../ejemplos/ejemplos-xslt/ejemplo-xslt-06-3.xml"><img src="../varios/iconos/icono-enlace.svg" alt="Enlace a ejemplo" title="Enlace a ejemplo" width="31" height="36" /></a></div>
          </div>
        </li>
      </ul>
    </section>
  </section>

  <footer>
    <p class="ultmod">Última modificación de esta página: 8 de junio de 2017</p>

    <p class="licencia">
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES"><img src="../varios/iconos/icono-cc-by-sa.svg" alt="Licencia Creative Commons" title="Licencia Creative Commons BY-SA" width="120" height="42" /></a><br />
      Esta página forma parte del curso <strong><a href="http://www.mclibre.org/consultar/xml/">XML: Lenguaje de marcas extensible</a></strong> por <a href="http://www.mclibre.org/">Bartolomé Sintes Marco</a><br />
      que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">Licencia Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional (CC BY-SA 4.0)</a>.
    </p>
  </footer>
</body>
</html>
